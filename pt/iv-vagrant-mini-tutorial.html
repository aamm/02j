
<!DOCTYPE html>
<!--
 Generated by Apache Maven Doxia at 2015-01-17
 Rendered using Reflow Maven Skin 1.1.1 (http://andriusvelykis.github.io/reflow-maven-skin)
-->
<html  xml:lang="pt" lang="pt">

	<head>
		<meta charset="UTF-8" />
		<title>ZeroToJava - iv. Vagrant mini tutorial</title>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="description" content="" />
		<meta http-equiv="content-language" content="pt" />

		<link href="http://netdna.bootstrapcdn.com/bootswatch/2.3.2/readable/bootstrap.min.css" rel="stylesheet" />
		<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet" />
		<link href="./css/bootswatch.css" rel="stylesheet" />
		<link href="./css/reflow-skin.css" rel="stylesheet" />


		<link href="./css/lightbox.css" rel="stylesheet" />

		<link href="./css/site.css" rel="stylesheet" />
		<link href="./css/print.css" rel="stylesheet" media="print" />

		<!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
		<!--[if lt IE 9]>
			<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->



	</head>

	<body class="page-iv-vagrant-mini-tutorial project-zerotojava" data-spy="scroll" data-offset="60" data-target="#toc-scroll-target">

		<div class="navbar navbar-fixed-top">
			<div class="navbar-inner">
				<div class="container">
					<a class="btn btn-navbar" data-toggle="collapse" data-target="#top-nav-collapse">
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
						<span class="icon-bar"></span>
					</a>
					<div class="nav-collapse collapse" id="top-nav-collapse">
						<ul class="nav pull-right">
							<li class="dropdown active">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Navegação <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li ><a href="index.html" title="Início">Início</a></li>
									<li class="dropdown-submenu disabled">
										<a title="Getting started">Getting started</a>
										<ul class="dropdown-menu">
											<li ><a href="i-introduction.html" title="i. Introduction">i. Introduction</a></li>
											<li ><a href="ii-course-material.html" title="ii. Course Material">ii. Course Material</a></li>
											<li ><a href="iii-setting-up-the-environment-linux.html" title="iii. Setting up the Environment - Linux">iii. Setting up the Environment - Linux</a></li>
											<li ><a href="iii-setting-up-the-environment-windows.html" title="iii. Setting up the Environment - Windows">iii. Setting up the Environment - Windows</a></li>
											<li class="active"><a href="" title="iv. Vagrant - Mini Tutorial">iv. Vagrant - Mini Tutorial</a></li>
										</ul>
									</li>
									<li class="dropdown-submenu disabled">
										<a title="Lessons">Lessons</a>
										<ul class="dropdown-menu">
											<li ><a href="lesson-1.html" title="1. Hello World!">1. Hello World!</a></li>
											<li ><a href="lesson-2.html" title="2. Simple calculations">2. Simple calculations</a></li>
										</ul>
									</li>
									<li ><a href="faq.html" title="FAQ">FAQ</a></li>
								</ul>
							</li>
							<li class="dropdown">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown">Documentação do Projeto <b class="caret"></b></a>
								<ul class="dropdown-menu">
									<li class="dropdown-submenu ">
										<a href="project-reports.html" title="Relatórios do Projeto">Relatórios do Projeto</a>
										<ul class="dropdown-menu">
											<li ><a href="changes-report.html" title="Changes Report">Changes Report</a></li>
										</ul>
									</li>
								</ul>
							</li>
						</ul>
					</div><!--/.nav-collapse -->
				</div>
			</div>
		</div>

	<div class="container">

	<!-- Masthead
	================================================== -->

	<header>
		<div>
			<ul class="breadcrumb">
				<li class="projectVersion version-date">Version: 0.1</li>
				<li class="divider">|</li>
				<li class="publishDate version-date">Last Published: 2015-01-17</li>
			</ul>
		</div>
	</header>

	<div class="main-body">
	<div class="row">
		<div class="span8">
			<div class="body-content">
				<div class="section"> 
 <div class="page-header">
  <h2 id="iv_Vagrant_mini_tutorial">iv. Vagrant mini tutorial</h2>
 </div> 
 <p>Along this course Vagrant will be used all the time. Although details about Vagrant are completely out of the scope of this course, it is important that the student understands some of the basic concepts about Vagrant to get familiar with the environment.</p> 
 <p>Perhaps one of the main problems about Vagrant for the beginner is that nothing is graphically visible. The user needs to have a sort of mental image of what is going on in order to navigate. As we saw on the previous part, there are two consoles: the host and the guest, that can be identified by their prefixes:</p> 
 <div> 
  <pre>user@host:~/JavaClasses$
vagrant@vagrant-ubuntu-trusty-32:~$ </pre> 
 </div> 
 <p>The first console depends on your computer and is quite different if you are using Windows. This tutorial is divided into topics to serve as a reference but it can also be followed from begin to end if you have Vagrant already configured as presented on the previous part.</p> 
 <p>It is important that you are always at the JavaClasses directory. Being on that directory is what makes Vagrant know that you are trying to work with a certain virtual machine.</p> 
 <div class="section"> 
  <h3 id="Checking_the_status">Checking the status</h3> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant status</pre> 
  </div> 
  <p>This command shows if the virtual machine is running or not.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Starting_the_virtual_machine">Starting the virtual machine</h3> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant up</pre> 
  </div> 
  <p>Now that the virtual machine is running we can check the status again and see that it changed.</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant status</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Stopping_the_virtual_machine">Stopping the virtual machine</h3> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant halt</pre> 
  </div> 
  <p>Now if we check the status, we will see that it changed to the original one.</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant status</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Accessing_the_virtual_machine_terminal">Accessing the virtual machine terminal</h3> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant ssh
vagrant@vagrant-ubuntu-trusty-32:~$</pre> 
  </div> 
  <p>Now we are inside of the virtual machine. All changes we make, such as creating files or directories, are going to change the virtual machine (guest OS). In order to illustrate such a concept, let us create a simple directory called trash:</p> 
  <div> 
   <pre>vagrant@vagrant-ubuntu-trusty-32:~$ mkdir trash
vagrant@vagrant-ubuntu-trusty-32:~$ ls
trash</pre> 
  </div> 
  <p>We need to go back to the host machine to compare the contents.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Leaving_the_virtual_machine">Leaving the virtual machine</h3> 
  <div> 
   <pre>vagrant@vagrant-ubuntu-trusty-32:~$ exit
user@host:~/JavaClasses$</pre> 
  </div> 
  <p>It is as simple as ending any console session. We can now check the contents of the host machine and we will see that the trash directory is not there:</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ ls
install.sh  VagrantFile</pre> 
  </div> 
  <p>But now we have the trash directory which is useless for us. What if we want to go back in time when everything was clean?</p> 
 </div> 
 <div class="section"> 
  <h3 id="Going_back_to_a_snapshot">Going back to a snapshot</h3> 
  <p>A snapshot is like a frozen picture of the virtual machine. You take that picture and you can order the virtual machine to go back to that state. On the previous section we took the &quot;clean&quot; snapshot. Now, let's go back to that snapshot. WARNING! You are about to erase everything you have done since you took the &quot;clean&quot; snapshot.</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant go clean
vagrant@vagrant-ubuntu-trusty-32:~$</pre> 
  </div> 
  <p>Vagrant puts you back to the guest console when you go back to a snapshot. Now you can run ls again and see that the trash directory is gone.</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ ls</pre> 
  </div> 
  <p>Now you can see nothing. What if you want to do the opposite, going further in time? You can't. In order to go to a certain state, you need to explicitly ask Vagrant to take a snapshot. If you wanted to go back to that state you should have taken a snapshot when you were at that state. So let us create another file called trashAgain, which will help us understand the process.</p> 
  <div> 
   <pre>vagrant@vagrant-ubuntu-trusty-32:~$ mkdir trashAgain
vagrant@vagrant-ubuntu-trusty-32:~$ ls
trashAgain</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Taking_a_snapshot">Taking a snapshot</h3> 
  <p>Now we can take another snapshot and name it x. In order to take a snapshot we need to go back to the host machine. It is interesting to note that the guest machine cannot do anything like that. The guest machine does not know that it is itself a virtual machine.</p> 
  <p>Now we can take another snapshot and name it x. In order to take a snapshot we need to go back to the host machine.</p> 
  <div> 
   <pre>vagrant@vagrant-ubuntu-trusty-32:~$ exit
user@host:~/JavaClasses$ vagrant take x</pre> 
  </div> 
  <p>Now we will go back to the &quot;clean&quot; state, which did not have the directory called &quot;trashAgain&quot;.</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant go clean
vagrant@vagrant-ubuntu-trusty-32:~$ ls
(nothing)
vagrant@vagrant-ubuntu-trusty-32:~$ exit</pre> 
  </div> 
  <p>Now let's go to the &quot;x&quot; state and see the &quot;trashAgain&quot; directory reappearing:</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant go x
vagrant@vagrant-ubuntu-trusty-32:~$ ls
trashAgain</pre> 
  </div> 
  <p>Now let's go back to the clean state.</p> 
  <div> 
   <pre>vagrant@vagrant-ubuntu-trusty-32:~$ exit
user@host:~/JavaClasses$ vagrant go clean
vagrant@vagrant-ubuntu-trusty-32:~$ exit
user@host:~/JavaClasses$ </pre> 
  </div> 
  <p>We have two snapshots, let's learn how to list them:</p> 
 </div> 
 <div class="section"> 
  <h3 id="Listing_snapshots">Listing snapshots</h3> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant snapshot list
clean x</pre> 
  </div> 
  <p>We don't need the &quot;x&quot; snapshot, which only contains trash. So we can then remove it:</p> 
 </div> 
 <div class="section"> 
  <h3 id="Removing_a_snapshot">Removing a snapshot</h3> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant snapshot delete x
user@host:~/JavaClasses$ vagrant snapshot list
clean</pre> 
  </div> 
  <p>As you can see, now you have only the &quot;clean&quot; snapshot.</p> 
 </div> 
 <div class="section"> 
  <h3 id="Rule_of_thumb">Rule of thumb</h3> 
  <p>Never type the following command again:</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant take clean</pre> 
  </div> 
  <p>If you type this command again you will modify the &quot;clean&quot; state. We don't want this! We want the clean state to be just like we defined on the previous part.</p> 
  <p>Therefore, as long as you do not change the &quot;clean&quot; state, you can always go back to it by typing:</p> 
  <div> 
   <pre>user@host:~/JavaClasses$ vagrant go clean</pre> 
  </div> 
 </div> 
 <div class="section"> 
  <h3 id="Compartilhando_o_seu_Vagrant_box">Compartilhando o seu Vagrant box</h3> 
  <p>Uma vez configurada a sua m&aacute;quina virtual, voc&ecirc; pode compartilh&aacute;-la digitando o seguinte:</p> 
  <div> 
   <pre>vagrant package --base zeroToJava</pre> 
  </div> 
  <p>Este comando criar&aacute; um arquivo chamado package.box, que voc&ecirc; pode usar para replicar a mesma m&aacute;quina virtual em outro computador.</p> 
 </div> 
</div>
			</div>
		</div>
		<div class="span4">
			<div id="toc-sidebar">
				<div class="well">
					<ul class="nav nav-list">
						<li class="nav-header">Table of Contents</li>
		<li class="dropdown"><a href="#iv_Vagrant_mini_tutorial" title="iv. Vagrant mini tutorial">iv. Vagrant mini tutorial <b class="caret"></b></a>
			<ul class="nav nav-list">
		<li><a href="#Checking_the_status" title="Checking the status">Checking the status</a>
		<li><a href="#Starting_the_virtual_machine" title="Starting the virtual machine">Starting the virtual machine</a>
		<li><a href="#Stopping_the_virtual_machine" title="Stopping the virtual machine">Stopping the virtual machine</a>
		<li><a href="#Accessing_the_virtual_machine_terminal" title="Accessing the virtual machine terminal">Accessing the virtual machine terminal</a>
		<li><a href="#Leaving_the_virtual_machine" title="Leaving the virtual machine">Leaving the virtual machine</a>
		<li><a href="#Going_back_to_a_snapshot" title="Going back to a snapshot">Going back to a snapshot</a>
		<li><a href="#Taking_a_snapshot" title="Taking a snapshot">Taking a snapshot</a>
		<li><a href="#Listing_snapshots" title="Listing snapshots">Listing snapshots</a>
		<li><a href="#Removing_a_snapshot" title="Removing a snapshot">Removing a snapshot</a>
		<li><a href="#Rule_of_thumb" title="Rule of thumb">Rule of thumb</a>
		<li><a href="#Compartilhando_o_seu_Vagrant_box" title="Compartilhando o seu Vagrant box">Compartilhando o seu Vagrant box</a>
				<li class="divider"></li>
			</ul>
		</li>
		<li><a href="#More_info" title="More info">More info</a>
					</ul>
				</div>
			</div>
			<div class="well sidebar">
	<h2 id="More_info">More info</h2>
<p>For more information about Vagrant and snapshot commands please check:</p>
<p><a class="externalLink" href="http://docs.vagrantup.com/v2/">http://docs.vagrantup.com/v2/</a></p>
<p><a class="externalLink" href="http://priyaaank.tumblr.com/post/50707609769/snapshotting-vagrant">http://priyaaank.tumblr.com/post/50707609769/snapshotting-vagrant</a></p>
			</div>
		</div>
	</div>
	</div>

	</div><!-- /container -->

	<!-- Footer
	================================================== -->
	<footer class="well">
		<div class="container">
			<div class="row">
				<div class="span9 bottom-nav">
					<ul class="nav nav-list">
						<li class="nav-header">Navegação</li>
						<li >
							<a href="index.html" title="Início">Início</a>
						</li>
						<li class="active">
							<a title="Getting started">Getting started <i class="icon-chevron-down"></i></a>
							<ul class="nav nav-list">
						<li >
							<a href="i-introduction.html" title="i. Introduction">i. Introduction</a>
						</li>
						<li >
							<a href="ii-course-material.html" title="ii. Course Material">ii. Course Material</a>
						</li>
						<li >
							<a href="iii-setting-up-the-environment-linux.html" title="iii. Setting up the Environment - Linux">iii. Setting up the Environment - Linux</a>
						</li>
						<li >
							<a href="iii-setting-up-the-environment-windows.html" title="iii. Setting up the Environment - Windows">iii. Setting up the Environment - Windows</a>
						</li>
						<li class="active">
							<a href="#" title="iv. Vagrant - Mini Tutorial">iv. Vagrant - Mini Tutorial</a>
						</li>
							</ul>
						</li>
						<li >
							<a title="Lessons">Lessons <i class="icon-chevron-right"></i></a>
						</li>
						<li >
							<a href="faq.html" title="FAQ">FAQ</a>
						</li>
						<li class="nav-header">Documentação do Projeto</li>
						<li >
							<a href="project-reports.html" title="Relatórios do Projeto">Relatórios do Projeto <i class="icon-chevron-right"></i></a>
						</li>
					</ul>
				</div>
			</div>
		</div>
	</footer>

	<div class="container subfooter">
		<div class="row">
			<div class="span12">
				<p class="pull-right"><a href="#">Back to top</a></p>
				<p class="copyright">Copyright &copy;2015. All Rights Reserved.</p>
				<p><a href="http://github.com/andriusvelykis/reflow-maven-skin" title="Reflow Maven skin">Reflow Maven skin</a> by <a href="http://andrius.velykis.lt" target="_blank" title="Andrius Velykis">Andrius Velykis</a>.</p>
			</div>
		</div>
	</div>

	<!-- Le javascript
	================================================== -->
	<!-- Placed at the end of the document so the pages load faster -->
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>

	<script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.2/js/bootstrap.min.js"></script>
	<script src="./js/lightbox.min.js"></script>
	<script src="./js/reflow-scroll.js"></script>

	<script src="./js/reflow-skin.js"></script>

	</body>
</html>
